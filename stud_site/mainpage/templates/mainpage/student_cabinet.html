{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>Личный кабинет ученика</title>
    <link rel="stylesheet" href="{% static 'mainpage/css/style_cabinet.css' %}">
</head>
<body>

    <header class="page-header">
        <div class="container">
            <nav>
                <a href="{% url 'home' %}" class="nav-link">Главная</a>
            </nav>
        </div>
    </header>

    <h1>Добро пожаловать в личный кабинет</h1>
    <p>Здесь отображается информация и настройки ученика.</p>

    {% if messages %}
        <ul style="color:green;">
            {% for message in messages %}
            <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <h2>Профиль</h2>
    <div class="profile-readonly" style="border:1px solid #ddd; padding:16px; border-radius:8px; background:#f9f9f9;">
        <p><strong>Имя:</strong> {{ profile.name }}</p>
        <p><strong>Фамилия:</strong> {{ profile.lastname }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>

        {% comment %} <p><strong>Фото:</strong><br>
            {% if profile.photo %}
                <img src="{{ profile.photo.url }}" alt="Фото" style="max-width:200px; border-radius:6px;">
            {% else %}
                <img src="{% static 'mainpage/img/default_user_photo.png' %}" alt="Фото отсутствует" style="max-width:200px; border-radius:6px;">
            {% endif %}
        </p> {% endcomment %}
    </div>

    <h2>Система тестирования</h2>
    <ul>
        <li><a href="{% url 'mainpage' %}">Система тестирования</a></li>
        <li><a href="{% url 'student_test_list' %}" class="nav-link {% if request.resolver_match.url_name == 'test_list' %}active{% endif %}">К тестам</a></li>
    </ul>

    <h2>Домашние задания</h2>
    <ul>
        <li><a href="{% url 'homework_upload' %}">Загрузить домашнее задание</a></li>
        <li><a href="{% url 'homework_download' %}">Скачать домашнее задание</a></li>
    </ul>

    <form action="{% url 'logout' %}" method="post">
        {% csrf_token %}
        <button type="submit">Выйти</button>
    </form>

    <script>
    document.getElementById('photo').addEventListener('change', function(event) {
        const [file] = this.files;
        if (file) {
            const preview = document.getElementById('photo-preview');
            preview.src = URL.createObjectURL(file);
        }
    });
    </script>
</body>
</html>